<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Compiling with OpenSilver </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Compiling with OpenSilver ">
    <meta name="generator" content="docfx 2.59.4.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../../fusion/toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <div class="header-top">
        
        <header id="header">
                    <div class="wrapper">
                        <div class="header_in">
                            <div id="hamb_menu" class="hamb show_sm"></div>
                            <a class="logo" href="https://opensilver.net/">
                                <img src="/images/Opensilver 2.0.png">
                            </a>
                            <!--<nav class="hide_sm">
                                <ul>
                                    <li><a href="https://opensilver.net/download.aspx">Download</a></li>
                                    <li><a href="/documentation/general/overview.html">Doc</a></li>
                                    <li><a href="https://opensilver.net/gallery">Gallery</a></li>
                                    <li><a href="https://opensilver.net/gallery#success-stories">Success Stories</a></li>
        
                                    <li><a href="https://opensilver.net/links/whatsnew.aspx">What's New</a></li>
                                    <li><a href="https://opensilver.net/contact.aspx">Contact</a></li>
                                    <li id="nav_more">More...</li>
                                </ul>
                            </nav>
        
                            <div class="header_UserSignin">
                                <p id="UserInformations"></p>
        
                            </div>-->
                        </div>
                    </div>
                    <!--<div class="additional_nav_out">
                        <div id="close_nav" class="close_btn hide_sm"></div>
                        <div class="wrapper">
        
                            <div class="additional_nav">
                                <div class="additional_nav-col">
                                    <h4>Product:</h4>
                                    <ul>
                                        <li><a href="https://opensilver.net/download.aspx">Download </a></li>
                                        <li><a href="/documentation/general/overview.html">Documentation</a></li>
                                        <li><a href="https://opensilver.net/gallery/"</a></li>
                                        <li><a href="https://opensilver.net/gallery#success-stories">Success Stories</a></li>
                                        <li><a href="https://opensilver.net/links/whatsnew.aspx">What's New</a></li>
                                        <li><a href="https://github.com/OpenSilver/OpenSilver">Source code on GitHub</a></li>
                                        <li><a href="https://opensilver.net/">Home</a></li>
                                    </ul>
                                </div>
                                <div class="additional_nav-col">
                                    <h4>Services:</h4>
                                    <ul>
                                        <li><a href="https://opensilver.net/links/migration-package.aspx">SL Migration Package</a></li>
                                        <li><a href="https://opensilver.net/migrate/upload-xap.aspx">Upload Your .XAP</a></li>
        
                                    </ul>
                                </div>
        
                                <div class="additional_nav-col">
                                    <h4>Company:</h4>
                                    <ul>
        
                                        <li><a href="https://opensilver.net/contact.aspx">Contact</a></li>
                                    </ul>
                                </div>
                                <div class="additional_nav-col social">
                                    <a class="additional_nav-social" href="https://twitter.com/OpenSilverTeam">
                                        <img src="/images/follow-us-on-twitter-light.png">
                                        <small>follow us on</small>
                                        twitter
                                    </a>
        
                                    <a class="additional_nav-social" href="https://github.com/OpenSilver/OpenSilver">
                                        <img src="/images/follow-us-on-github-light.png">
                                        <small>view source on</small>
                                        GitHub
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>-->
                </header>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-8">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="compiling-with-opensilver">Compiling with OpenSilver</h1>

<p><strong>Note: this section assumes that you would like to do the migration on your own. Alternatively, you can have your application migrated by Userware - the company behind OpenSilver - in a fast and cost-effective way, so that your resources are free to work on other tasks. Visit <a href="https://opensilver.net">OpenSilver.net</a> for details.</strong></p>
<h2 id="pre-requisites">Pre-requisites</h2>
<p>Before starting to migrate to OpenSilver:</p>
<ul>
<li>Follow the steps described on the &quot;<a href="environment-setup.html">Environment Setup</a>&quot; page</li>
<li>Make sure that you have the full source code of the legacy Silverlight application tthat you wish to migrate to OpenSilver</li>
<li><strong>Make sure that the legacy Silverlight application fully compiles on your developer machine</strong>. All the Silverlight projects should be loading and compiling properly, and all the referenced libraries should be properly resolved. Refer to the &quot;<a href="environment-setup.html">Environment Setup</a>&quot; page for the list of software that you may need to install to get the Silverlight application to compile.</li>
<li>If the Silverlight application has database connections make sure that the connection strings are correct.
<ul>
<li>Go to <strong>Server Explorer</strong> tab</li>
<li>Right click on <strong>Data Connections</strong> -&gt; <strong>Add Connection...</strong></li>
<li>Enter Server name then select database and click OK. Db will appear under <strong>Data Connections</strong></li>
<li>To see connection string check db properties.</li>
</ul>
</li>
<li>At this stage you do not need to be able to run the Silverlight application on your local developer machine yet, but this will be useful at a later stage.</li>
</ul>
<h2 id="the-general-principle">The general principle</h2>
<p>The general principle for migrating a Silverlight application to OpenSilver consists of creating an OpenSilver-type project for each of the original Silverlight projects, then copying / pasting all the files from the original projects to the OpenSilver projects, and finally compiling the solution.</p>
<p>In practice however, we do not want to copy/paste the files but rather share them between the original application and the migrated application, so that both applications can be maintained, at least in the short term. This also makes it easier to merge code changes in case that new developments or bug fixes are made on the original Silverlight application while we are still migrating it.</p>
<p>To avoid manual editing of <strong>.sln</strong> and <strong>.csproj</strong> or <strong>.vbproj</strong> files the following steps can be taken.</p>
<ul>
<li><p>Create an OpenSilver application with the same name as Silverlight application has but in different location</p>
</li>
<li><p>Add all other Silverlight-type projects the solution has using according names.<br>
If the project type is a <strong>Silverlight Class Library</strong> then <strong>OpenSilver Class Library</strong> needs to be created.</p>
<p>Now we have the same directory structure as original Silverlight application has.</p>
</li>
<li><p>Rename solution and all Silverlight related projects adding <strong>.OpenSilver</strong> at the end</p>
</li>
<li><p>Remove <strong>.OpenSilver</strong> from <strong>Assembly name</strong></p>
<p>In Solution Explorer, right-click on project -&gt; Properties<br>
This needs to be done in order to not broke &quot;xmlns&quot; references in XAML files.</p>
</li>
<li><p>Copy all <strong>.sln</strong> and <strong>.csproj</strong> or <strong>.vbproj</strong> files to according Silverlight project locations</p>
</li>
</ul>
<p>You can find more detailed instructions in this <a href="example.html">example</a>.</p>
<h2 id="errors-are-expected">Errors are expected</h2>
<p>Some compilation errors are expected, because OpenSilver currently supports a (fairly large) subset of Silverlight functionality, so manual work should be expected. This guide provides tips and guidance to fix those compilation errors.</p>
<h3 id="errors-from-xamlcs-or-xamlvb-sources">Errors from .xaml.cs or .xaml.vb sources</h3>
<p>Many different compilation errors related to UI controls can occur if the project consists of <strong>.xaml</strong> files (which Silverlight application usually does). For example, errors while migrating C# code :</p>
<p><img src="/images/XamlErrors.png" alt="xaml Errors" title="xaml Errors"></p>
<p>This error is due to the files <strong>.g.i.cs</strong> not being generated. To fix it, click on <strong>.xaml</strong> file, go to its properties (F4), and in the advanced section choose:</p>
<pre><code>Build Action: Content
Custom Tool: MSBuild:Compile
</code></pre>
<p><img src="/images/BuildAction.png" alt="Build Action" title="Build Action"></p>
<p>Please note that if the project includes <strong>Generic.xaml</strong> file for default styles, then most probably no errors will be encountered during compilation but some screens will not be shown as expected at the end. So the above steps need to be followed both for <strong>Generic.xaml</strong> and for all other <strong>.xaml</strong> files.</p>
<h3 id="make-build-configurations-consistent">Make build configurations consistent</h3>
<p>Some large projects might have different build configurations with many compiler directives. As a result a lot of confusing errors might be encountered during compilation.
It is a good practice to check the original <strong>Silverlight</strong> project and see if the build configurations are consistent with the <strong>OpenSilver</strong> project.</p>
<h3 id="known-issues">Known issues</h3>
<p>Visit the &quot;<a href="../troubleshooting/common-issues-and-solutions.html">Troubleshooting</a>&quot; page for known issues and tips.</p>
<h2 id="use-compiler-directives-to-not-break-the-original-silverlight-application">Use compiler directives to not break the original Silverlight application</h2>
<h4 id="in-c-or-vbnet-files">In C# or VBNET files:</h4>
<p>Every time that we need to make a change to the C# or VB.NET code, we are going to use the #if OPENSILVER and #if !OPENSILVER compiler directives to distinguish between the original code and the migrated one. The goes is to be able to quickly find all the places that have been modified, and also to make changes to the files without breaking the original Silverlight application. (Read above to understand why we want to avoid breaking the original Silverlight application)</p>
<p>It is possible that OpenSilver doesn't have required class or method implemented yet. The temporary solution for compiling the project would be to add empty classes/methods in OpenSilver &quot;Empty Namespaces&quot; folder and use that .dll instead.</p>
<h4 id="in-xaml-files">In XAML files:</h4>
<p>As far as XAML files are concerned, since compiler directives do not work in XAML, we recommend these 2 approaches to make changes to the XAML code without breaking the original Silverlight application:</p>
<ul>
<li>If it is a small change, try to do it in the C# or VB.NET code-behind file (as required) instead of the XAML file. To do so, first add x:Name=&quot;SOME_NAME&quot; (in XAML) to the control that you wish to modify, then make the change in the constructor in the C# or VB.NET code-behind, and use #if OPENSILVER compiler directive to make sure that the change does not break the original Silverlight version of the application.</li>
<li>If the change is extensive or if it cannot be done in the C# or VB.NET code-behind, we recommend you to create a copy of the XAML file, and reference that copy in your OpenSilver project, while the original Silverlight application references the original file. For example, if you need to make a change to &quot;App.xaml&quot;, you should create a copy named for example &quot;App.OpenSilver.xaml&quot;, and have the OpenSilver project  reference that file instead of &quot;App.xaml&quot;. Note: the associated C# or VB.NET code-behind file (&quot;App.xaml.cs/App.xaml.vb&quot;) can still be shared between the original and migrated projects.</li>
</ul>
<h4 id="here-are-the-steps-to-copy-and-use-a-new-xaml-file">Here are the steps to copy and use a new XAML file:</h4>
<h4 id="1-copy-xaml-file-name-that-needs-to-be-duplicated">1. Copy XAML file name that needs to be duplicated</h4>
<p><img src="/images/xaml_copy/1.png" alt="Copy XAML file" title="Copy XAML file"></p>
<h4 id="2-add-a-new-item">2. Add a new item</h4>
<p>In <strong>Solution Explorer</strong> right-click on the folder where the file is located and choose <strong>Add -&gt; New item ...</strong></p>
<p><img src="/images/xaml_copy/2.png" alt="Add new item" title="Add new item"></p>
<h4 id="3-choose-item-type">3. Choose item type</h4>
<p>Most of the time xaml will represent different Silverlights controls - <strong>UserControl, ChildWindow, Page</strong> etc. In that case we can create the exact altertnative OpenSilver provides.</p>
<p><img src="/images/xaml_copy/3.png" alt="Choose control type" title="Choose control type"></p>
<p>If it is not the case then we can simply create any of given controls and then rename and modify as needed.</p>
<h4 id="4-change-namespace">4. Change namespace</h4>
<p>Visual Studio will automatically generate a namespace which might not be the one we wanted. Copy the namespace from original .cs or .vb file and replace it in both <strong>.OpenSilver.xaml</strong> and <strong>.OpenSilver.xaml.cs</strong> or <strong>.OpenSilver.xaml.vb</strong> files. Below is example from C#</p>
<p><img src="/images/xaml_copy/4.png" alt="Change namespace" title="Change namespace">
<img src="/images/xaml_copy/5.png" alt="Change namespace" title="Change namespace"></p>
<h4 id="5-exclude-the-original-one-from-project">5. Exclude the original one from project</h4>
<p>We can exclude the original <strong>.xaml</strong> and <strong>.cs</strong> or <strong>.vb</strong> files from project because now we have new ones. The below steps shows how to exclude a <strong>.cs</strong> file. The same steps can be followed for <strong>.vb</strong> file.</p>
<p><img src="/images/xaml_copy/6.png" alt="Exclude project" title="Exclude project"></p>
<p>Here is how it looks like after</p>
<p><img src="/images/xaml_copy/7.png" alt="Excluded project" title="Excluded project"></p>
<p>To see the files that are not part of the project click <strong>Show All Files</strong> button in <strong>Projects Explorer</strong></p>
<p><img src="/images/xaml_copy/8.png" alt="Show all files" title="Show all files"></p>
<p>Please note that it is also possible to replace only .xaml file and share the original .cs or .vb file.
For example, in C# migration, we can just exlude (or remove) <strong>.OpenSilver.xaml.cs</strong> from project and include the original <strong>.xaml.cs</strong></p>
<p>It will look little bit odd though because now .xaml.cs will not be shown as a direct child for .OpenSilver.xaml in Solution Explorer.</p>
<p><img src="/images/xaml_copy/9.png" alt="Share .cs file" title="Share .cs file"></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/OpenSilver/OpenSilver.Documentation/blob/master/documentation/migrate-from-silverlight/compile-with-opensilver.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
          </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
