<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Localization </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Localization ">
    <meta name="generator" content="docfx 2.59.4.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../../fusion/toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <div class="header-top">
        
        <header id="header">
                    <div class="wrapper">
                        <div class="header_in">
                            <div id="hamb_menu" class="hamb show_sm"></div>
                            <a class="logo" href="https://opensilver.net/">
                                <img src="/images/OpenSilver-3.1-Logo-MidRes.png">
                            </a>
                            <!--<nav class="hide_sm">
                                <ul>
                                    <li><a href="https://opensilver.net/download.aspx">Download</a></li>
                                    <li><a href="/documentation/general/overview.html">Doc</a></li>
                                    <li><a href="https://opensilver.net/gallery">Gallery</a></li>
                                    <li><a href="https://opensilver.net/gallery#success-stories">Success Stories</a></li>
        
                                    <li><a href="https://opensilver.net/links/whatsnew.aspx">What's New</a></li>
                                    <li><a href="https://opensilver.net/contact.aspx">Contact</a></li>
                                    <li id="nav_more">More...</li>
                                </ul>
                            </nav>
        
                            <div class="header_UserSignin">
                                <p id="UserInformations"></p>
        
                            </div>-->
                        </div>
                    </div>
                    <!--<div class="additional_nav_out">
                        <div id="close_nav" class="close_btn hide_sm"></div>
                        <div class="wrapper">
        
                            <div class="additional_nav">
                                <div class="additional_nav-col">
                                    <h4>Product:</h4>
                                    <ul>
                                        <li><a href="https://opensilver.net/download.aspx">Download </a></li>
                                        <li><a href="/documentation/general/overview.html">Documentation</a></li>
                                        <li><a href="https://opensilver.net/gallery/"</a></li>
                                        <li><a href="https://opensilver.net/gallery#success-stories">Success Stories</a></li>
                                        <li><a href="https://opensilver.net/links/whatsnew.aspx">What's New</a></li>
                                        <li><a href="https://github.com/OpenSilver/OpenSilver">Source code on GitHub</a></li>
                                        <li><a href="https://opensilver.net/">Home</a></li>
                                    </ul>
                                </div>
                                <div class="additional_nav-col">
                                    <h4>Services:</h4>
                                    <ul>
                                        <li><a href="https://opensilver.net/links/migration-package.aspx">SL Migration Package</a></li>
                                        <li><a href="https://opensilver.net/migrate/upload-xap.aspx">Upload Your .XAP</a></li>
        
                                    </ul>
                                </div>
        
                                <div class="additional_nav-col">
                                    <h4>Company:</h4>
                                    <ul>
        
                                        <li><a href="https://opensilver.net/contact.aspx">Contact</a></li>
                                    </ul>
                                </div>
                                <div class="additional_nav-col social">
                                    <a class="additional_nav-social" href="https://twitter.com/OpenSilverTeam">
                                        <img src="/images/follow-us-on-twitter-light.png">
                                        <small>follow us on</small>
                                        twitter
                                    </a>
        
                                    <a class="additional_nav-social" href="https://github.com/OpenSilver/OpenSilver">
                                        <img src="/images/follow-us-on-github-light.png">
                                        <small>view source on</small>
                                        GitHub
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>-->
                </header>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-8">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="localization">Localization</h1>

<p>Localization enables rendering content in different cultures and languages inside OpenSilver applications.</p>
<p>The majority of the information used here is documented in the Microsoft Blazor WebAssembly article for localization (<a href="https://learn.microsoft.com/en-us/aspnet/core/blazor/globalization-localization?view=aspnetcore-7.0&amp;pivots=webassembly">https://learn.microsoft.com/en-us/aspnet/core/blazor/globalization-localization?view=aspnetcore-7.0&amp;pivots=webassembly</a>).</p>
<h2 id="localize-contents-based-on-browser-language">Localize contents based on browser language</h2>
<ol>
<li><p>Add a <code>New Item</code> to the class project. Choose the <code>Resources File</code> option. Note that if you do not include the culture code between the filename and the <code>.resx</code> extension, it will be valid as the default language. In order to be explicit, you could name the file <code>Content.en-US.resx</code>, for example.<br>
<img src="../../images/how-to-topics/localization/localization1.png" alt="addingResourcesFile" title="Adding New Resources File"></p>
</li>
<li><p>Double-click the newly created Resources file to edit it in Visual Studio. Add localizable strings to the file<br>
<img src="../../images/how-to-topics/localization/localization2.png" alt="resourcesFileEditor" title="Resources File Editor"></p>
</li>
<li><p>Add any number of additional Resources files, one for each of the desired languages. For example, we add a new one for Brazilian Portuguese:<br>
<img src="../../images/how-to-topics/localization/localization3.png" alt="addingAnotherResourcesFile" title="Adding Another Resources File"></p>
</li>
<li><p>For each new Resources file, add the corresponding localized strings, keeping the same <code>Name</code> fields across all <code>.resx</code> files:<br>
<img src="../../images/how-to-topics/localization/localization4.png" alt="resourcesFileEditorInAnotherLang" title="Resources File Editor In Another Lang"></p>
</li>
<li><p>Make sure that all Resources files are marked with Build Action as Embedded Resource:<br>
<img src="../../images/how-to-topics/localization/localization5.png" alt="filesSetToEmbeddedResources" title="Files Set to Embedded Resources"></p>
</li>
<li><p>Add the <code>Microsoft.Extensions.Localization</code> NuGet package to the .Browser project:<br>
<img src="../../images/how-to-topics/localization/localization6.png" alt="extensionsLocalizationNuGetPackage" title="Microsoft.Extension.Localization NuGet package"></p>
</li>
<li><p>Set the <code>BlazorWebAssemblyLoadAllGlobalizationData</code> flag to <code>true</code> on the <code>.Browser</code> <code>.csproj</code> file:<br>
<img src="../../images/how-to-topics/localization/localization7.png" alt="globalizationBlazorFlag" title="Blazor Globalization flag to true"></p>
</li>
<li><p>Add <code>builder.Services.AddLocalization()</code> to the <code>Main</code> method in <code>Program.cs</code> on the <code>.Browser</code> project:<br>
<img src="../../images/how-to-topics/localization/localization8.png" alt="blazorBuilderServicesLocalizationAdd" title="Adding Localization Service to Blazor builder"></p>
</li>
<li><p>Go to the <code>MainPage.xaml</code> file in the class project (or any other file that you would like to place the messages) and have a control that can display the contents, for example:<br>
<img src="../../images/how-to-topics/localization/localization9.png" alt="messageDisplayControl" title="Message Display Control"></p>
</li>
<li><p>In the code-behind (or via <code>Binding</code>), get localized strings from the <code>.resx</code> files by calling their generated code:<br>
<img src="../../images/how-to-topics/localization/localization10.png" alt="getLocalizedStringViaCode" title="Getting Localized Strings Via Code"></p>
</li>
<li><p>Run the app. Contents will be based on the language set for the browser. If set to English, the content will be obtained from the <code>Content.resx</code> file (because there is no specific <code>Content.en-US.resx</code> file available):<br>
<img src="../../images/how-to-topics/localization/localization11.png" alt="englishMessage" title="English Message"></p>
</li>
<li><p>By changing the browser language to Brazilian Portuguese and refreshing the page, we can see the updated message (that was obtained from <code>Content.pt-BR.resx</code>):<br>
<img src="../../images/how-to-topics/localization/localization12.png" alt="brazilianPortugueseBrowser" title="Brazilian Portuguese Browser"><br>
<img src="../../images/how-to-topics/localization/localization13.png" alt="brazilianPortugueseMessage" title="Brazilian Portuguese Message"></p>
</li>
</ol>
<h2 id="parameterize-the-culture">Parameterize the culture</h2>
<p>So far, contents were localized based on the default browser language. In order to make the language parameterized, follow these steps:</p>
<ol>
<li>In the <code>wwwroot/index.html</code> file in the <code>.Browser</code> project, add a JS property that can store the selected culture using localStorage, for example:<br></li>
</ol>
<pre><code class="lang-JS">&lt;script&gt;
  window.selectedCultureName = {
    get: () =&gt; window.localStorage['selectedCultureName'],
    set: (value) =&gt; window.localStorage['selectedCultureName'] = value
  };
&lt;/script&gt;
</code></pre>
<p><img src="../../images/how-to-topics/localization/localization14.png" alt="jsProperty" title="JS property to store culture"></p>
<ol start="2">
<li>In <code>Program.cs</code>, add the following code before <code>host.RunAsync()</code> is executed:</li>
</ol>
<pre><code class="lang-C#">CultureInfo culture;
var js = host.Services.GetRequiredService&lt;IJSRuntime&gt;();
var result = await js.InvokeAsync&lt;string&gt;(&quot;selectedCultureName.get&quot;);

if (result != null)
{
    culture = new CultureInfo(result);
}
else
{
    culture = new CultureInfo(&quot;en-US&quot;);
    await js.InvokeVoidAsync(&quot;selectedCultureName.set&quot;, &quot;en-US&quot;);
}

CultureInfo.DefaultThreadCurrentCulture = culture;
CultureInfo.DefaultThreadCurrentUICulture = culture;
</code></pre>
<p><img src="../../images/how-to-topics/localization/localization15.png" alt="retrieveCultureFromLocalStorage" title="Retrieve culture from localStorage"></p>
<ol start="3">
<li><p>On <code>MainPage.xaml</code>, add a control to select the possible cultures:<br>
<img src="../../images/how-to-topics/localization/localization16.png" alt="cultureSelector" title="Culture Selector"></p>
</li>
<li><p>Then add code to update the localStorage value and refresh the page:</p>
</li>
</ol>
<pre><code class="lang-C#">namespace LocalizationOpenSilverApp
{
    public partial class MainPage : Page
    {
        public MainPage()
        {
            this.InitializeComponent();

            Loaded += MainPage_Loaded;
        }

        private void MainPage_Loaded(object sender, RoutedEventArgs e)
        {
            TextBlock1.Text = LocalizationOpenSilverApp.Content.WelcomeMessage;

            CultureComboBox.ItemsSource = new List&lt;CultureInfo&gt;
            {
                new CultureInfo(&quot;en-US&quot;),
                new CultureInfo(&quot;pt-BR&quot;)
            };
            if (CultureComboBox.Items.Contains(CultureInfo.DefaultThreadCurrentCulture))
            {
                CultureComboBox.SelectedItem = CultureInfo.DefaultThreadCurrentCulture;
            }
            CultureComboBox.SelectionChanged += CultureComboBox_SelectionChanged;
        }

        private void CultureComboBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            OpenSilver.Interop.ExecuteJavaScriptVoid(&quot;window.selectedCultureName.set($0)&quot;, (e.AddedItems[0] as CultureInfo).Name);

            OpenSilver.Interop.ExecuteJavaScriptVoid(&quot;location.reload()&quot;);
        }
    }
}
</code></pre>
<p><img src="../../images/how-to-topics/localization/localization17.png" alt="updateLocalStorage" title="Update localStorage"></p>
<ol start="5">
<li>Now it is possible to select the desired language:<br>
<img src="../../images/how-to-topics/localization/localization18.png" alt="englishParameterizedCulture" title="English Parameterized Culture"><br>
<img src="../../images/how-to-topics/localization/localization19.png" alt="brazilianPortugueseParameterizedCulture" title="Brazilian Portuguese Parameterized Culture"></li>
</ol>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/OpenSilver/OpenSilver.Documentation/blob/master/documentation/in-depth-topics/localization.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
          </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
