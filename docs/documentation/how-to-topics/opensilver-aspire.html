<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Integrating OpenSilver with .NET Aspire </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Integrating OpenSilver with .NET Aspire ">
    <meta name="generator" content="docfx 2.59.4.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../../fusion/toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <div class="header-top">
        
        <header id="header">
                    <div class="wrapper">
                        <div class="header_in">
                            <div id="hamb_menu" class=""></div>
                            <a class="logo" href="https://opensilver.net/">
                                <img src="/images/opensilver-logo.png">
                            </a>
                            <!--<nav class="hide_sm">
                                <ul>
                                    <li><a href="https://opensilver.net/download.aspx">Download</a></li>
                                    <li><a href="/documentation/general/overview.html">Doc</a></li>
                                    <li><a href="https://opensilver.net/gallery">Gallery</a></li>
                                    <li><a href="https://opensilver.net/gallery#success-stories">Success Stories</a></li>
        
                                    <li><a href="https://opensilver.net/links/whatsnew.aspx">What's New</a></li>
                                    <li><a href="https://opensilver.net/contact.aspx">Contact</a></li>
                                    <li id="nav_more">More...</li>
                                </ul>
                            </nav>
        
                            <div class="header_UserSignin">
                                <p id="UserInformations"></p>
        
                            </div>-->
                        </div>
                    </div>
                    <!--<div class="additional_nav_out">
                        <div id="close_nav" class="close_btn hide_sm"></div>
                        <div class="wrapper">
        
                            <div class="additional_nav">
                                <div class="additional_nav-col">
                                    <h4>Product:</h4>
                                    <ul>
                                        <li><a href="https://opensilver.net/download.aspx">Download </a></li>
                                        <li><a href="/documentation/general/overview.html">Documentation</a></li>
                                        <li><a href="https://opensilver.net/gallery/"</a></li>
                                        <li><a href="https://opensilver.net/gallery#success-stories">Success Stories</a></li>
                                        <li><a href="https://opensilver.net/links/whatsnew.aspx">What's New</a></li>
                                        <li><a href="https://github.com/OpenSilver/OpenSilver">Source code on GitHub</a></li>
                                        <li><a href="https://opensilver.net/">Home</a></li>
                                    </ul>
                                </div>
                                <div class="additional_nav-col">
                                    <h4>Services:</h4>
                                    <ul>
                                        <li><a href="https://opensilver.net/links/migration-package.aspx">SL Migration Package</a></li>
                                        <li><a href="https://opensilver.net/migrate/upload-xap.aspx">Upload Your .XAP</a></li>
        
                                    </ul>
                                </div>
        
                                <div class="additional_nav-col">
                                    <h4>Company:</h4>
                                    <ul>
        
                                        <li><a href="https://opensilver.net/contact.aspx">Contact</a></li>
                                    </ul>
                                </div>
                                <div class="additional_nav-col social">
                                    <a class="additional_nav-social" href="https://twitter.com/OpenSilverTeam">
                                        <img src="/images/follow-us-on-twitter-light.png">
                                        <small>follow us on</small>
                                        twitter
                                    </a>
        
                                    <a class="additional_nav-social" href="https://github.com/OpenSilver/OpenSilver">
                                        <img src="/images/follow-us-on-github-light.png">
                                        <small>view source on</small>
                                        GitHub
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>-->
                </header>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-8">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="integrating-opensilver-with-net-aspire">Integrating OpenSilver with .NET Aspire</h1>

<h2 id="introduction">Introduction</h2>
<p><strong>OpenSilver</strong> is a modern, cross-platform frontend framework based on .NET and XAML, designed to build powerful and flexible web applications. For comprehensive web solutions, developers often pair OpenSilver frontends with robust backend services. <strong>.NET Aspire</strong> simplifies this integration by providing unified infrastructure for deploying, managing, and scaling .NET backend applications.</p>
<p>This article will guide you through the process of integrating an OpenSilver frontend application with backend services managed by .NET Aspire, leveraging their combined strengths to streamline development and deployment.</p>
<hr>
<h2 id="what-is-net-aspire">What is .NET Aspire?</h2>
<p><strong>.NET Aspire</strong> is a Microsoft infrastructure framework tailored for hosting, deploying, and managing backend .NET applications. It provides:</p>
<ul>
<li>Unified configuration and automatic service discovery</li>
<li>Seamless scaling and load balancing</li>
<li>Built-in observability (monitoring and diagnostics)</li>
<li>Robust, resilient service management</li>
</ul>
<p>With .NET Aspire, developers can focus on business logic while benefiting from modern DevOps practices “out-of-the-box.”</p>
<hr>
<h2 id="why-integrate-opensilver-frontend-with-net-aspire-backend">Why Integrate OpenSilver Frontend with .NET Aspire Backend?</h2>
<h3 id="1-easy-integration">1. Easy Integration</h3>
<p>.NET Aspire streamlines the connection between OpenSilver frontend apps and backend APIs, enabling fast, secure, and reliable communication.</p>
<h3 id="2-simplified-deployment">2. Simplified Deployment</h3>
<p>Frontends and backends can be deployed together, reducing manual setup and ensuring consistent, reproducible environments.</p>
<h3 id="3-automatic-scaling">3. Automatic Scaling</h3>
<p>Backend services scale automatically in response to frontend demand, maintaining performance and responsiveness.</p>
<h3 id="4-built-in-observability">4. Built-in Observability</h3>
<p>Aspire provides out-of-the-box monitoring, logging, and diagnostics—allowing you to quickly gain insights and diagnose issues.</p>
<h3 id="5-enhanced-reliability">5. Enhanced Reliability</h3>
<p>With managed service lifecycles and resilience features, Aspire ensures high backend availability, creating a stable platform for OpenSilver applications.</p>
<hr>
<h2 id="example-integration-opensilver-with-net-aspire">Example Integration: OpenSilver with .NET Aspire</h2>
<p>To illustrate, we’ve developed a practical example, available on <a href="https://github.com/OpenSilver/OpenSilver.Documentation/tree/master/examples/OpenSilverAndAspire">GitHub</a>.</p>
<h3 id="solution-overview">Solution Overview</h3>
<p>The example solution consists of:</p>
<ul>
<li><strong>OpenSilverAndAspire.ApiService:</strong> A minimal API service providing weather data</li>
<li><strong>OpenSilverAndAspire.Browser:</strong> The OpenSilver (Blazor WebAssembly) app displaying weather data</li>
<li><strong>OpenSilverAndAspire.WasmHost:</strong> An ASP.NET Core app hosting the OpenSilver frontend and bridging Aspire configuration</li>
<li><strong>OpenSilverAndAspire.AppHost:</strong> The “orchestrator” that coordinates startup and connections between services using Aspire</li>
<li><strong>OpenSilverAndAspire.ServiceDefaults:</strong> Aspire service utility code</li>
<li><strong>OpenSilverAndAspire:</strong> The core OpenSilver project with frontend logic</li>
</ul>
<hr>
<h3 id="wasm-host-bridging-opensilver-and-aspire">WASM Host: Bridging OpenSilver and Aspire</h3>
<p>Although OpenSilver is, under the hood, a Blazor WebAssembly application, simply adding it to Aspire as a static web app offers limited benefits. A key feature of Aspire is automatic management of service URLs. To leverage this, we introduce a thin ASP.NET Core hosting layer—<strong>OpenSilverAndAspire.WasmHost</strong>—which serves the OpenSilver app and passes service configuration at runtime.</p>
<p>The WasmHost is responsible for:</p>
<ul>
<li>Serving the OpenSilver frontend</li>
<li>Exposing Aspire configuration to the frontend</li>
</ul>
<hr>
<h3 id="apphost-the-orchestration-layer">AppHost: The Orchestration Layer</h3>
<p>The orchestration of projects is handled in <code>Program.cs</code> within <strong>OpenSilverAndAspire.AppHost</strong>. Here’s the essence:</p>
<pre><code class="lang-csharp">var builder = DistributedApplication.CreateBuilder(args);

var apiService = builder
    .AddProject&lt;Projects.OpenSilverAndAspire_ApiService&gt;(&quot;apiservice&quot;)
    .WithExternalHttpEndpoints();

builder
    .AddProject&lt;Projects.OpenSilverAndAspire_WasmHost&gt;(&quot;webfrontend&quot;)
    .WithExternalHttpEndpoints()
    .WithReference(apiService)
    .WaitFor(apiService);

builder.Build().Run();
</code></pre>
<p>This configuration:</p>
<ul>
<li>Registers the API service and the WasmHost (frontend)</li>
<li>Ensures the frontend depends on and waits for the backend API</li>
<li>Enables Aspire’s dashboard to monitor both services</li>
</ul>
<p>We can now run the <code>.AppHost</code> project and view the configuration in the Aspire dashboard:
<img src="/images/how-to-topics/aspire-dashboard.png" alt="Aspire Dashboard" title="Aspire Dashboard"></p>
<hr>
<h3 id="passing-service-configuration-to-the-frontend">Passing Service Configuration to the Frontend</h3>
<p>To call the API from the OpenSilver frontend, the frontend needs to know the backend’s URL. Aspire provides this information to the WasmHost, which then must relay it to the OpenSilver client.</p>
<p>In <strong>OpenSilverAndAspire.WasmHost/Program.cs</strong>, we added the following minimal endpoint:</p>
<pre><code class="lang-csharp">app.MapGet(&quot;/aspire-config&quot;, (IConfiguration config) =&gt; new
{
    services = config.GetSection(&quot;services&quot;).Get&lt;Dictionary&lt;string, Dictionary&lt;string, string[]&gt;&gt;&gt;()
});
</code></pre>
<p>This endpoint returns Aspire’s service config, making it accessible to the frontend.</p>
<hr>
<h3 id="consuming-configuration-in-the-opensilver-browser-project">Consuming Configuration in the OpenSilver Browser Project</h3>
<p>In <strong>OpenSilverAndAspire.Browser/Program.cs</strong>, read the configuration as follows:</p>
<pre><code class="lang-csharp">var http = new HttpClient
{
    BaseAddress = new Uri(builder.HostEnvironment.BaseAddress)
};
using var responseStream = await http.GetStreamAsync(&quot;aspire-config&quot;);
builder.Configuration.AddJsonStream(responseStream);
</code></pre>
<p>This loads service configuration at runtime, enabling dynamic service discovery.</p>
<hr>
<h3 id="enabling-service-discovery-and-http-client-configuration">Enabling Service Discovery and HTTP Client Configuration</h3>
<p>With the configuration in place, use the <code>Microsoft.Extensions.ServiceDiscovery</code> NuGet package:</p>
<pre><code class="lang-csharp">builder.Services.AddServiceDiscovery();
builder.Services.ConfigureHttpClientDefaults(http =&gt;
{
    http.AddServiceDiscovery();
});

builder.Services.AddHttpClient(&quot;apiservice&quot;, client =&gt;
{
    client.BaseAddress = new Uri(&quot;https://apiservice&quot;);
});
</code></pre>
<p>Now, calling your backend is simple:</p>
<pre><code class="lang-csharp">var httpClient = host.Services.GetRequiredService&lt;IHttpClientFactory&gt;().CreateClient(&quot;apiservice&quot;);
var result = await httpClient.GetStringAsync(&quot;weatherforecast&quot;);
</code></pre>
<p>You can verify in browser dev tools that requests are automatically routed to the correct backend URL.</p>
<hr>
<h3 id="handling-cors-in-apiservice">Handling CORS in ApiService</h3>
<p>A common issue at this stage is <strong>CORS</strong> (Cross-Origin Resource Sharing). For simplicity, in this example, all origins are allowed (in production, restrict origins for security):</p>
<p><strong>OpenSilverAndAspire.ApiService/Program.cs:</strong></p>
<pre><code class="lang-csharp">builder.Services.AddCors(options =&gt;
{
    options.AddPolicy(&quot;AllowAll&quot;, policy =&gt;
    {
        policy
          .AllowAnyOrigin()
          .AllowAnyHeader()
          .AllowAnyMethod();
    });
});
</code></pre>
<p>And:</p>
<pre><code class="lang-csharp">app.UseCors(&quot;AllowAll&quot;);
</code></pre>
<p>Now, requests from the frontend will succeed.</p>
<h2 id="weather-forecast"><img src="/images/how-to-topics/weather-forecast.png" alt="Weather Forecast" title="Weather Forecast"></h2>
<h3 id="alternative-proxy-approach-for-cors">Alternative: Proxy Approach for CORS</h3>
<p>Instead of enabling CORS on the API, another approach is to route all API calls through the ASP.NET Core host (WasmHost). This way, the frontend calls the same origin as itself, and the host proxies requests to the backend API, sidestepping CORS altogether. This can improve security and simplify frontend code.</p>
<hr>
<h2 id="conclusion">Conclusion</h2>
<p>Integrating OpenSilver with .NET Aspire unlocks a productive workflow for building, deploying, and operating modern .NET web applications. Aspire’s powerful service orchestration, configuration management, and observability features simplify backend management—while OpenSilver enables you to deliver rich, responsive web frontends.</p>
<p>Try the <a href="https://github.com/OpenSilver/OpenSilver.Documentation/tree/master/examples/OpenSilverAndAspire">sample project</a> to get started, and bring your .NET solutions to the next level!</p>
<hr>
<p><strong>Feedback, questions, or suggestions?</strong> <a href="https://github.com/OpenSilver/OpenSilver/issues">Open an issue on GitHub</a> or join the community discussion.</p>
<hr>
<p><strong>Further Reading:</strong></p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/dotnet/aspire/">.NET Aspire documentation</a></li>
<li><a href="https://doc.opensilver.net/documentation/general/overview.html">OpenSilver documentation</a></li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/OpenSilver/OpenSilver.Documentation/blob/master/documentation/how-to-topics/opensilver-aspire.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
          </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
